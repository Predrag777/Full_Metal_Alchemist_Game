<html>
    <head>
        <title>Full Metal</title>
        <link rel="stylesheet" href="style/main_style.css">
    </head>
    <body id="body">
        <div id="main_player"></div>
        

    </body>
    <script>
        class Enemy {
    constructor(id, x, y) {
        // Definisanje pozicija x i y
        this.x = x;
        this.y = y;
        this.id = id

        // Boolean vrednosti za akcije
        this.move = false;
        this.jump = false;
        this.attack = false;
    }

    // Metoda za pomeranje neprijatelja
    startMove() {
        this.move = true;
        console.log('Enemy started moving');
    }

    stopMove() {
        this.move = false;
        console.log('Enemy stopped moving');
    }

    // Metoda za skok
    startJump() {
        this.jump = true;
        console.log('Enemy jumped');
    }

    stopJump() {
        this.jump = false;
        console.log('Enemy landed');
    }

    // Metoda za napad
    startAttack() {
        this.attack = true;
        console.log('Enemy started attacking');
    }

    stopAttack() {
        this.attack = false;
        console.log('Enemy stopped attacking');
    }
}

function setEnemy(id, x,y){
    const enemy = document.createElement("div");


            enemy.id = `enemy-${id}`;
            enemy.style.backgroundColor = "green";
            enemy.style.width = "100px"; 
            enemy.style.height = "200px"; 
            enemy.style.position = "absolute"; 
            enemy.style.left = x + "px"; 
            enemy.style.top = y + "px"; 
            enemy.classList.add("enemy");


            

            document.getElementById("body").appendChild(enemy);
}
    </script>
    <script>
        var x = 200;
        var y = 700;
        var speed = 0, jumpSpeed = 0, myCounter = 0;
        var jump = false, reachedTop = false, weapon1 = false, move = false;
    
        var enemySpeed = 20;
        var enemyJump = false, enemyReachTop = false, enemyMove = false


        var numberOfEnemy=2
        var enemiesList=[]
        for (let i = 0; i < numberOfEnemy; i++) {
            const newEnemy = new Enemy(i, 800 + i * 200, 700);

            
            setEnemy(i, newEnemy.x, newEnemy.y)
            enemiesList.push(newEnemy);
        }
        console.log(enemiesList.length)
        var urlImage = 'url("images/characters/edward/edwardelricBase.png")';
    
        function setPlayer(x, y) {
            var div = document.getElementById("main_player");
    
            div.style.marginLeft = x + "px";
            div.style.marginTop = y + "px";
            div.style.backgroundImage = urlImage;
        }
    
        document.addEventListener('keydown', function (event) {
            if (event.key === 'ArrowUp' && !jump) {
                jump = true;
                jumpSpeed = 50;
                console.log("Jump");
            }
            if (event.key === 'ArrowRight') {
                console.log("Right");
                move = true;
                speed = 20;
            }
            if (event.key === 'ArrowLeft') {
                console.log("Left");
                move = true;
                speed = -20;
            }
            if (event.key === "1" && !jump) {
                console.log("WEAPON1");
                weapon1 = true;
            }
            console.log("SS")

        });
    
        function handleMovement() {
            if (move) {
                x += speed;
                urlImage = (urlImage.includes('edwardelricBase.png')) 
                    ? 'url("images/characters/edward/edwardelricBase2.png")' 
                    : 'url("images/characters/edward/edwardelricBase.png")';
                move = false;
                speed = 0;
            }
        }
    
        function handleJump() {
            if (jump) {
                y -= jumpSpeed;
                if (y < 500 && !reachedTop) {
                    jumpSpeed *= -1;
                    reachedTop = true;
                }
                if (reachedTop && y >= 700) {
                    y = 700;
                    jumpSpeed = 0;
                    jump = false;
                    reachedTop = false;
                    urlImage = 'url("images/characters/edward/edwardelricBase.png")';
                } else {
                    urlImage = 'url("images/characters/edward/edwardelricJump.png")';
                }
            }
        }
    
        function handleWeapon1() {
            if (weapon1) {
                myCounter++;
                if (myCounter < 15) {
                    urlImage = 'url("images/characters/edward/edwardelricCallWeapon.png")';
                } else if (myCounter < 20) {
                    urlImage = 'url("images/characters/edward/edwardelricWeapon1.png")';
                    weapon1 = false;
                } else {
                    myCounter = 0;
                    weapon1 = false;
                }
            }
        }


   
    
    function moveEnemies(id) {
        var enemy1 = document.getElementById("enemy-"+id);

        enemiesList[id-1].x -= enemySpeed;
        enemy1.style.marginLeft = enemiesList[id-1].x + "px";
    }


    function enemyJump(id){
        var enemy1=document.getElementById("enemy-"+id)
        enemiesList[id-1].y-=enemySpeed
        if(enemiesList[id-1].y<500 && !enemyReachTop)
    }


    var repaint = setInterval(function () {
        moveEnemies(1);

        handleMovement();
        handleJump();
        handleWeapon1();
        setPlayer(x, y);
    }, 100);
    setPlayer(x, y);
</script>
    



<script>
    
</script>
</html>